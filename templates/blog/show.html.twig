 {% extends 'base.html.twig' %} 

{% block title %}{{ blog.title }}{% endblock %}

{% block body %}
<section class="blog_single section_padding" style="background-color: #f8f9fa; padding: 60px 0;">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                
                <!-- Blog Image -->
                <div class="mb-4">
                    {% if blog.content %}
                        <img src="{{ blog.content }}" alt="{{ blog.title }}" 
                             class="img-fluid rounded" 
                             style="width: 100%; height: 400px; object-fit: cover; border-radius: 10px;">
                    {% else %}
                        <div style="background-color: #e9ecef; height: 400px; border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                            <span style="color: #6c757d; font-size: 1.2rem;">No Image Available</span>
                        </div>
                    {% endif %}
                </div>

                <!-- Blog Title -->
                <h1 class="mb-3" style="color: #212529; font-weight: 700; font-size: 2.2rem;">
                    {{ blog.title }}
                </h1>

                <!-- Category and Date -->
                <div class="d-flex align-items-center mb-4" style="color: #6c757d;">
                    {% if blog.category %}
                        <span style="background-color: #e9ecef; padding: 5px 15px; border-radius: 20px; font-weight: 600; margin-right: 15px;">
                            {{ blog.category }}
                        </span>
                    {% endif %}
                    <span>Published on {{ blog.createdAt|date('F d, Y') }}</span>
                </div>

                <!-- Blog Full Content -->
                

                <!-- Comments Section -->
                <div class="comments-section mt-5 pt-4" style="border-top: 1px solid #dee2e6;">
                    <h4 class="mb-4" style="color: #212529; font-weight: 700;">
                        Comments 
                        <span style="background-color: #6c757d; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.9rem;">
                            {{ blog.comments|length }}
                        </span>
                    </h4>

                    {% if blog.comments|length > 0 %}
                        <div class="comments-list">
                            {% for comment in blog.comments %}
                                <div class="mb-4 p-3" style="background-color: white; border-radius: 8px; border-left: 4px solid #007bff;">
                                    <div class="d-flex justify-content-between align-items-start mb-2">
                                        <strong style="color: #212529;">{{ comment.user.nom }}</strong>
                                        <small style="color: #6c757d;">{{ comment.createdAt|date('M d, Y Â· h:i A') }}</small>
                                    </div>
                                    <p style="color: #495057; margin: 0;">{{ comment.content }}</p>
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="text-center py-4" style="color: #6c757d;">
                            <p>No comments yet. Be the first to comment!</p>
                        </div>
                    {% endif %}

                    <!-- Comment Form -->
                    {% if app.user %}
                        <div class="mt-4 p-4" style="background-color: white; border-radius: 8px;">
                            <h5 class="mb-3" style="color: #212529;">Add a Comment</h5>
                            <form action="{{ path('app_blog_comment', {'id': blog.id}) }}" method="POST">
                                <div class="mb-3">
                                    <textarea name="content" id="commentContent" rows="4" 
                                              class="form-control" 
                                              placeholder="Write your comment here..."
                                              style="border: 1px solid #ced4da; border-radius: 6px; padding: 15px;"
                                              required></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary">
                                    Submit Comment
                                </button>
                            </form>
                        </div>
                    {% else %}
                        <div class="mt-4 p-3 text-center" style="background-color: #e9ecef; border-radius: 8px;">
                            <p class="mb-0" style="color: #6c757d;">
                                Please <a href="{{ path('app_login') }}" style="color: #007bff; text-decoration: none;">log in</a> to add a comment.
                            </p>
                        </div>
                    {% endif %}
                </div>

            </div>
        </div>
    </div>
</section>

<style>
    /* Simple hover effects */
    .comments-list div:hover {
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .btn-primary {
        background-color: #007bff;
        border-color: #007bff;
        padding: 10px 30px;
        border-radius: 6px;
    }
    
    .btn-primary:hover {
        background-color: #0056b3;
        border-color: #0056b3;
    }
</style>
{% endblock %}