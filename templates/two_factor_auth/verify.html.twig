{% extends 'base.html.twig' %}

{% block body %}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
@keyframes fadeUp {
    from {opacity:0; transform:translateY(40px);}
    to {opacity:1; transform:translateY(0);}
}

body{
    background: linear-gradient(90deg,#b8325b,#0b4fa3);
}

.main-wrapper{
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:50px 0;
}

.register-box{
    width:500px;
    background:white;
    border-radius:6px;
    padding:40px;
    box-shadow:0 0 30px rgba(0,0,0,.3);
    animation:fadeUp .8s ease;
}

h2{
    font-weight:600;
    margin-bottom:30px;
    text-align:center;
}

.form-control{
    border:none;
    border-bottom:1px solid #aaa;
    border-radius:0;
    transition:.3s;
}

.form-control:focus{
    box-shadow:none;
    border-color:#635bff;
    padding-left:8px;
}

.btn-primary{
    background:linear-gradient(90deg,#635bff,#a52bf9);
    border:none;
    padding:12px 30px;
    border-radius:4px;
    transition:.4s;
    width:100%;
}

.btn-primary:hover{
    transform:translateY(-2px);
    box-shadow:0 10px 20px rgba(99,91,255,.4);
}

.alert{
    font-size:13px;
    animation:fadeUp .6s ease;
}
</style>

<div class="main-wrapper">

<div class="register-box">

    <h2>Two-Factor Authentication</h2>

    {% if error is defined and error %}
        <div class="alert alert-danger">
            {{ error.messageKey|trans(error.messageData, 'security') }}
        </div>
    {% endif %}

    {% for message in app.flashes('error') %}
        <div class="alert alert-danger">{{ message }}</div>
    {% endfor %}

    <p class="text-center mb-4">Please enter the 6-digit code from your authenticator app.</p>

    <form method="post">
        
        <div class="mb-3">
            <label for="2fa_code" class="form-label">Verification Code</label>
            <input type="text" 
                   name="2fa_code" 
                   id="2fa_code"
                   class="form-control text-center" 
                   placeholder="000000"
                   required 
                   autofocus
                   maxlength="6"
                   pattern="[0-9]*"
                   inputmode="numeric"
                   autocomplete="one-time-code">
        </div>

        <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

        <button type="submit" class="btn btn-primary">Verify</button>

    </form>

</div>

</div>

{% endblock %}
